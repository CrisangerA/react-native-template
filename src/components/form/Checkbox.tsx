import React from 'react';
import { Control, useController } from 'react-hook-form';
import { Checkbox as CheckboxCore } from '@components/core';

interface CheckboxProps
  extends Omit<
    React.ComponentProps<typeof CheckboxCore>,
    'checked' | 'onChange'
  > {
  control: Control<any, any>;
  name: string;
}

export function Checkbox({ name, control, ...rest }: CheckboxProps) {
  const {
    field: { value, onChange },
  } = useController({ name, control });

  const handleChange = React.useCallback(
    (checked: boolean) => {
      onChange(checked);
    },
    [onChange],
  );

  return <CheckboxCore {...rest} checked={!!value} onChange={handleChange} />;
}
